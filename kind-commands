1. Prerequisites
docker --version
kubectl version --client


Install KIND:

curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.22.0/kind-linux-amd64
chmod +x kind
sudo mv kind /usr/local/bin/
kind version

2. Basic KIND commands
Create a single cluster
kind create cluster --name hub

List clusters
kind get clusters

Delete cluster
kind delete cluster --name hub

Get kubeconfig
kubectl config get-contexts
kubectl config use-context kind-hub

3. Multi-cluster (Hub–Spoke) setup
Create hub cluster
kind create cluster --name hub

Create spoke cluster
kind create cluster --name spoke-dev

Verify contexts
kubectl config get-contexts


Expected:

kind-hub
kind-spoke-dev

4. Verify inter-cluster networking (IMPORTANT)
docker network inspect kind


Both clusters will be in the same Docker network → ✔ reachable.

5. Install Argo CD on HUB cluster
kubectl config use-context kind-hub
kubectl create namespace argocd
kubectl apply -n argocd \
-f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml


Wait:

kubectl -n argocd get pods -w

6. Access Argo CD UI (correct way)
kubectl port-forward svc/argocd-server -n argocd 8080:443


Browser:

https://localhost:8080


Get password:

kubectl -n argocd get secret argocd-initial-admin-secret \
-o jsonpath="{.data.password}" | base64 -d

7. Login to Argo CD CLI
argocd login localhost:8080 --username admin --password <PASSWORD> --insecure

8. Add SPOKE cluster to Argo CD (THIS WILL WORK)
argocd cluster add kind-spoke-dev


Verify:

argocd cluster list

9. Advanced KIND cluster configuration (multi-node)
Create config file
cat <<EOF > kind-multi-node.yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
- role: worker
- role: worker
EOF

Create cluster
kind create cluster --name hub --config kind-multi-node.yaml

10. Advanced networking (Ingress ready)
Enable ingress
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml


Wait:

kubectl get pods -n ingress-nginx

11. Advanced Argo CD exposure (Ingress)
kubectl -n argocd patch svc argocd-server \
-p '{"spec":{"type":"ClusterIP"}}'


Ingress example:

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: argocd
  namespace: argocd
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
spec:
  rules:
  - host: argocd.local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: argocd-server
            port:
              number: 443

12. Advanced cluster operations
Rename cluster (recreate)
kind delete cluster --name old
kind create cluster --name new

Export kubeconfig
kind get kubeconfig --name hub > hub-kubeconfig.yaml

13. Troubleshooting commands (important)
kubectl cluster-info
kubectl get nodes -o wide
docker ps
docker network inspect kind

14. Why KIND works (one line)

KIND clusters share the same Docker network, so Argo CD can reach all Kubernetes APIs.

15. Production mapping (interview-ready)
Lab	Production
KIND	EKS
Docker network	VPC
Port-forward	ALB
Ingress NGINX	AWS ALB Controller
Manual cluster add	GitOps bootstrap
